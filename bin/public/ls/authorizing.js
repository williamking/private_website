// Generated by LiveScript 1.3.1
(function(){
  $(function(){
    var alertMessage;
    alertMessage = function(msg, callback){
      $('#authorize-message').find('p').text(msg);
      $('#authorize-message').removeClass('invisible').removeClass('extent-out-animate').addClass('extent-in-animate');
      if (callback) {
        return $(authorizeMessage + "").find('.close').click(callback);
      }
    };
    $('#profile-button').click(function(){
      window.location.href = "/profile";
    });
    $('#logout-button').click(function(){
      $.get('/logout', function(msg, status){
        return showTheMessage(msg, "logout");
      });
    });
    $('#login-button').click(function(){
      $('#login').removeClass('invisible').removeClass('extent-out-animate').addClass('extent-in-animate');
    });
    $('#register-button').click(function(){
      $('#register').removeClass('invisible').removeClass('extent-out-animate').addClass('extent-in-animate');
    });
    $('.close').click(function(e){
      $(e.currentTarget).parent().parent().removeClass('extent-in-animate').addClass('extent-out-animate').addClass('invisible');
    });
    $('.cancel').click(function(e){
      $(e.currentTarget).parent().parent().removeClass('extent-in-animate').addClass('extent-out-animate').addClass('invisible');
    });
    $('.message-confirm').click(function(e){
      $(e.currentTarget).parent().parent().removeClass('extent-in-animate').addClass('extent-out-animate').addClass('invisible');
    });
    $('#login-submit').click(function(e){
      var form;
      form = $(e.currentTarget).parent().parent();
      $.ajax({
        url: '/login',
        data: {
          username: form.find("[name='username']").val(),
          password: form.find("[name='password']").val()
        },
        type: 'post',
        success: function(data){
          if (data.result === 'success') {
            alertMessage(data.result, function(){
              window.location.reload();
            });
          } else {
            alertMessage(data.result + ' ' + data.msg);
          }
        },
        error: function(req){
          alertMessage(req.status + ' ' + req.statusText);
        }
      });
    });
    $('#register-submit').click(function(e){
      var form;
      form = $(e.currentTarget).parent().parent();
      $.ajax({
        url: '/login',
        data: {
          username: form.find("[name='username']").val(),
          password: form.find("[name='password']").val()
        },
        type: 'post',
        success: function(data){
          if (data.result === 'success') {
            alertMessage(data.result, function(){
              window.location.reload();
            });
          } else {
            alertMessage(data.result + ' ' + data.msg);
          }
        },
        error: function(req){
          alertMessage(req.status + ' ' + req.statusText);
        }
      });
    });
  });
}).call(this);
